create table karnety
(
	Idkarnetu int not null
		primary key,
	NrKlienta int null,
	Nazwakarnetu text not null,
	Od date not null,
	Do date not null
)
engine=InnoDB
;

create index FK_Relationship_4
	on karnety (NrKlienta)
;

create table klient
(
	NrKlienta int not null
		primary key,
	IdMiasta int null,
	Imie text not null,
	Nazwisko text not null,
	Telefon int not null
)
engine=InnoDB
;

create index FK_Relationship_9
	on klient (IdMiasta)
;

alter table karnety
	add constraint FK_Relationship_4
		foreign key (NrKlienta) references klient (NrKlienta)
;

create table magazyn
(
	IdMagazynu int not null
		primary key,
	IdSilowni int null,
	Urzadzenie text not null,
	Ilosc int not null
)
engine=InnoDB
;

create index FK_Relationship_2
	on magazyn (IdSilowni)
;

create table miasto
(
	IdMiasta int not null
		primary key,
	Nazwa text not null
)
engine=InnoDB
;

alter table klient
	add constraint FK_Relationship_9
		foreign key (IdMiasta) references miasto (IdMiasta)
;

create table silownia
(
	IdSilowni int not null
		primary key,
	IdMiasta int null,
	Nazwa text not null,
	constraint FK_Relationship_8
		foreign key (IdMiasta) references miasto (IdMiasta)
)
engine=InnoDB
;

create index FK_Relationship_8
	on silownia (IdMiasta)
;

alter table magazyn
	add constraint FK_Relationship_2
		foreign key (IdSilowni) references silownia (IdSilowni)
;

create table szafki
(
	Zajetosc tinyint(1) not null,
	NrSzafki int not null
		primary key,
	IdSzatni int null,
	AktualnyKlient int null
)
engine=InnoDB
;

create index FK_Relationship_7
	on szafki (IdSzatni)
;

create table szatnia
(
	IdSzatni int not null
		primary key,
	IdSilowni int null,
	Plec tinyint(1) not null,
	constraint FK_Relationship_5
		foreign key (IdSilowni) references silownia (IdSilowni)
)
engine=InnoDB
;

create index FK_Relationship_5
	on szatnia (IdSilowni)
;

alter table szafki
	add constraint FK_Relationship_7
		foreign key (IdSzatni) references szatnia (IdSzatni)
;

create table uzytkownik
(
	Login text not null,
	Haslo text not null,
	IdUzytkownika int not null
		primary key,
	IdSilowni int null,
	constraint FK_Relationship_3
		foreign key (IdSilowni) references silownia (IdSilowni)
)
engine=InnoDB
;

create index FK_Relationship_3
	on uzytkownik (IdSilowni)
;

create table wplaty
(
	IdWplaty int not null
		primary key,
	IdSilowni int null,
	Tytul text not null,
	Kwota int not null,
	Data date not null,
	constraint FK_Relationship_6
		foreign key (IdSilowni) references silownia (IdSilowni)
)
engine=InnoDB
;

create index FK_Relationship_6
	on wplaty (IdSilowni)
;

